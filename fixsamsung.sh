#!/bin/bash

# Samsung loves deleting dotfiles
git checkout .gitignore
git checkout .mailmap
git checkout Documentation/DocBook/.gitignore
git checkout Documentation/DocBook/media/dvb/.gitignore
git checkout Documentation/DocBook/media/v4l/.gitignore
git checkout Documentation/accounting/.gitignore
git checkout Documentation/arm/SH-Mobile/.gitignore
git checkout Documentation/auxdisplay/.gitignore
git checkout Documentation/connector/.gitignore
git checkout Documentation/filesystems/.gitignore
git checkout Documentation/ia64/.gitignore
git checkout Documentation/laptops/.gitignore
git checkout Documentation/misc-devices/mei/.gitignore
git checkout Documentation/pcmcia/.gitignore
git checkout Documentation/prctl/.gitignore
git checkout Documentation/ptp/.gitignore
git checkout Documentation/spi/.gitignore
git checkout Documentation/timers/.gitignore
git checkout Documentation/vDSO/.gitignore
git checkout Documentation/vm/.gitignore
git checkout Documentation/watchdog/src/.gitignore
git checkout arch/.gitignore
git checkout arch/alpha/kernel/.gitignore
git checkout arch/arc/boot/.gitignore
git checkout arch/arc/kernel/.gitignore
git checkout arch/arm/boot/.gitignore
git checkout arch/arm/boot/compressed/.gitignore
git checkout arch/arm/crypto/.gitignore
git checkout arch/arm/kernel/.gitignore
git checkout arch/arm/vdso/.gitignore
git checkout arch/arm64/boot/.gitignore
git checkout arch/arm64/boot/dts/.gitignore
git checkout arch/arm64/boot/dts/apm-mustang.dts
git checkout arch/arm64/boot/dts/apm-storm.dtsi
git checkout arch/arm64/boot/dts/foundation-v8.dts
git checkout arch/arm64/boot/dts/rtsm_ve-aemv8a.dts
git checkout arch/arm64/boot/dts/rtsm_ve-motherboard.dtsi
git checkout arch/arm64/boot/dts/skeleton.dtsi
git checkout arch/arm64/boot/dts/thunder-88xx.dts
git checkout arch/arm64/boot/dts/thunder-88xx.dtsi
git checkout arch/arm64/configs/defconfig
git checkout arch/arm64/kernel/.gitignore
git checkout arch/arm64/kernel/vdso/.gitignore
git checkout arch/avr32/boot/images/.gitignore
git checkout arch/avr32/kernel/.gitignore
git checkout arch/blackfin/boot/.gitignore
git checkout arch/blackfin/kernel/.gitignore
git checkout arch/cris/boot/.gitignore
git checkout arch/ia64/kernel/.gitignore
git checkout arch/m32r/kernel/.gitignore
git checkout arch/m68k/kernel/.gitignore
git checkout arch/metag/boot/.gitignore
git checkout arch/metag/kernel/.gitignore
git checkout arch/microblaze/boot/.gitignore
git checkout arch/microblaze/kernel/.gitignore
git checkout arch/mips/boot/.gitignore
git checkout arch/mips/kernel/.gitignore
git checkout arch/mn10300/boot/.gitignore
git checkout arch/parisc/kernel/.gitignore
git checkout arch/powerpc/boot/.gitignore
git checkout arch/powerpc/kernel/.gitignore
git checkout arch/powerpc/kernel/vdso32/.gitignore
git checkout arch/powerpc/kernel/vdso64/.gitignore
git checkout arch/powerpc/platforms/cell/spufs/.gitignore
git checkout arch/s390/boot/.gitignore
git checkout arch/s390/boot/compressed/.gitignore
git checkout arch/s390/kernel/.gitignore
git checkout arch/s390/kernel/vdso32/.gitignore
git checkout arch/s390/kernel/vdso64/.gitignore
git checkout arch/sh/boot/.gitignore
git checkout arch/sh/boot/compressed/.gitignore
git checkout arch/sh/kernel/.gitignore
git checkout arch/sh/kernel/vsyscall/.gitignore
git checkout arch/sparc/boot/.gitignore
git checkout arch/sparc/kernel/.gitignore
git checkout arch/um/.gitignore
git checkout arch/unicore32/.gitignore
git checkout arch/x86/.gitignore
git checkout arch/x86/boot/.gitignore
git checkout arch/x86/boot/compressed/.gitignore
git checkout arch/x86/boot/tools/.gitignore
git checkout arch/x86/kernel/.gitignore
git checkout arch/x86/kernel/cpu/.gitignore
git checkout arch/x86/lib/.gitignore
git checkout arch/x86/realmode/rm/.gitignore
git checkout arch/x86/tools/.gitignore
git checkout arch/x86/um/vdso/.gitignore
git checkout arch/x86/vdso/.gitignore
git checkout arch/x86/vdso/vdso32/.gitignore
git checkout arch/xtensa/boot/.gitignore
git checkout arch/xtensa/boot/boot-elf/.gitignore
git checkout arch/xtensa/boot/lib/.gitignore
git checkout arch/xtensa/kernel/.gitignore
git checkout crypto/asymmetric_keys/.gitignore
git checkout drivers/atm/.gitignore
git checkout drivers/eisa/.gitignore
git checkout drivers/gpu/drm/radeon/.gitignore
git checkout drivers/net/ethernet/broadcom/tg3.c
git checkout drivers/net/ethernet/broadcom/tg3.h
git checkout drivers/net/wan/.gitignore
git checkout drivers/scsi/.gitignore
git checkout drivers/scsi/aic7xxx/.gitignore
git checkout drivers/tty/vt/.gitignore
git checkout drivers/video/logo/.gitignore
git checkout drivers/zorro/.gitignore
git checkout firmware/.gitignore
git checkout firmware/cis/.gitignore
git checkout kernel/.gitignore
git checkout kernel/debug/kdb/.gitignore
git checkout kernel/sched/cpufreq_sched.c
git checkout kernel/sched/energy.c
git checkout kernel/sched/tune.c
git checkout kernel/sched/walt.c
git checkout lib/.gitignore
git checkout lib/raid6/.gitignore
git checkout net/wireless/.gitignore
git checkout samples/hidraw/.gitignore
git checkout samples/mic/mpssd/.gitignore
git checkout samples/seccomp/.gitignore
git checkout scripts/.gitignore
git checkout scripts/basic/.gitignore
git checkout scripts/dtc/.gitignore
git checkout scripts/genksyms/.gitignore
git checkout scripts/kconfig/.gitignore
git checkout scripts/kconfig/lxdialog/.gitignore
git checkout scripts/mod/.gitignore
git checkout scripts/selinux/genheaders/.gitignore
git checkout scripts/selinux/mdp/.gitignore
git checkout security/apparmor/.gitignore
git checkout security/selinux/.gitignore
git checkout security/tomoyo/.gitignore
git checkout sound/oss/.gitignore
git checkout tools/cgroup/.gitignore
git checkout tools/lguest/.gitignore
git checkout tools/lib/traceevent/.gitignore
git checkout tools/perf/.gitignore
git checkout tools/perf/config/feature-checks/.gitignore
git checkout tools/power/cpupower/.gitignore
git checkout tools/power/x86/turbostat/.gitignore
git checkout tools/testing/selftests/kcmp/.gitignore
git checkout tools/testing/selftests/memfd/.gitignore
git checkout tools/testing/selftests/mqueue/.gitignore
git checkout tools/testing/selftests/net/.gitignore
git checkout tools/testing/selftests/networking/timestamping/.gitignore
git checkout tools/testing/selftests/rcutorture/.gitignore
git checkout tools/testing/selftests/vm/.gitignore
git checkout tools/usb/usbip/.gitignore
git checkout tools/virtio/.gitignore
git checkout tools/vm/.gitignore
git checkout usr/.gitignore

# permission change to match kernel_common
sudo chmod -x net/bluetooth/hci_event.c
sudo chmod +x arch/arm/Makefile
sudo chmod +x drivers/staging/android/ion/ion_carveout_heap.c
sudo chmod +x scripts/bootgraph.pl
sudo chmod +x scripts/export_report.pl
sudo chmod +x scripts/gcc-goto.sh
sudo chmod +x scripts/gcc-version.sh
sudo chmod +x scripts/gcc-x86_32-has-stack-protector.sh
sudo chmod +x scripts/gcc-x86_64-has-stack-protector.sh
sudo chmod +x scripts/gen_initramfs_list.sh
sudo chmod +x scripts/headers_check.pl
sudo chmod +x scripts/headers_install.sh
sudo chmod +x scripts/kconfig/lxdialog/check-lxdialog.sh
sudo chmod +x scripts/kconfig/streamline_config.pl
sudo chmod +x scripts/link-vmlinux.sh
sudo chmod +x scripts/markup_oops.pl
sudo chmod +x scripts/mkmakefile
sudo chmod +x scripts/mksysmap
sudo chmod +x scripts/package/builddeb
sudo chmod +x scripts/package/buildtar
sudo chmod +x scripts/profile2linkerlist.pl
sudo chmod +x scripts/rt-tester/rt-tester.py
sudo chmod +x scripts/selinux/install_policy.sh
sudo chmod +x scripts/tracing/draw_functrace.py
sudo chmod +x scripts/xz_wrap.sh

# Use real sdcardfs path instead of symlink
mv fs/sdcardfs/p .
rm -rf fs/sdcardfs
mv p fs/sdcardfs
sed -i 's/SDCARDFS_VERSION="/ccflags-y \+= -Ifs\n\nSDCARDFS_VERSION="/g' fs/sdcardfs/Makefile

# Unignore special samsung files
sed -i 's/\*\.fw\n\*\.bin/\*\.fw/g' firmware/.gitignore
sed -i 's/android\/configs\/android-\*\.cfg/android\/configs\/android-\*\.cfg\n\n# Samsung\n!init\/vmm\.elf\n!firmware\/gnss_firmware\.bin/g' .gitignore
